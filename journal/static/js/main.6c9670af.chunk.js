(this.webpackJsonpjournal=this.webpackJsonpjournal||[]).push([[0],{1015:function(e,t,n){},1016:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(63),u=n.n(c),i=n(11),o=n(108),s=n(74),l=n(1029),p=n(1033),f=n(5),m=n.n(f),b=n(87),h=n(107),v=n(26),y=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage;Object(b.a)(this,e),this.storage=t}return Object(h.a)(e,[{key:"get",value:function(e,t){var n=this.storage.getItem(e);return null===n?t:JSON.parse(n)}},{key:"set",value:function(e,t,n){var r;t instanceof Function?r=t(this.get(e,n)):r=t;return this.storage.setItem(e,JSON.stringify(r)),r}},{key:"has",value:function(e){return void 0!==this.storage[e]}}]),e}()),d=n(46);function O(){return w.apply(this,arguments)}function w(){return(w=Object(v.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.has("tupelo:privateKey")){e.next=5;break}return e.next=3,d.EcdsaKey.generate();case 3:t=e.sent,y.set("tupelo:privateKey",Array.from(t.privateKey));case 5:return n=new Uint8Array(y.get("tupelo:privateKey")),e.abrupt("return",d.EcdsaKey.fromBytes(n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.Community=d.Community,window.ChainTree=d.ChainTree,window.EcdsaKey=d.EcdsaKey,window.setDataTransaction=d.setDataTransaction;var j=function(){function e(t,n){Object(b.a)(this,e),this.key=t,this.did=n}return Object(h.a)(e,[{key:"init",value:function(){var e=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.Community.getDefault();case 2:this.community=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTip",value:function(){var e=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.community.getTip(this.did);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(v.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.community.playTransactions(this.tree,[Object(d.setDataTransaction)(t,n)]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(v.a)(m.a.mark((function e(t,n){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tree.resolve("/tree/data/"+t);case 2:return r=e.sent,r.remaining,a=r.value,e.abrupt("return",null===a?n:a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.community.playTransactions(this.tree,[Object(d.setDataTransaction)(t,void 0)]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"fromKey",value:function(){var t=Object(v.a)(m.a.mark((function t(n){var r,a,c,u;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!==n){t.next=4;break}return t.next=3,O();case 3:n=t.sent;case 4:return r=new e(n),t.next=7,r.init();case 7:return t.next=9,d.ChainTree.newEmptyTree(r.community.blockservice,n);case 9:return a=t.sent,t.next=12,a.id();case 12:return c=t.sent,t.prev=13,t.next=16,r.community.getTip(c);case 16:u=t.sent,r.tree=new d.ChainTree({store:r.community.blockservice,tip:u,key:n}),t.next=25;break;case 20:if(t.prev=20,t.t0=t.catch(13),"not found"===t.t0.toString()){t.next=24;break}throw t.t0;case 24:r.tree=a;case 25:return t.next=27,r.tree.id();case 27:return r.did=t.sent,t.abrupt("return",r);case 29:case"end":return t.stop()}}),t,null,[[13,20]])})));return function(e){return t.apply(this,arguments)}}()},{key:"fromDID",value:function(){var t=Object(v.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new e(null,n),t.next=3,r.init();case 3:return t.t0=d.ChainTree,t.t1=r.community.blockservice,t.next=7,r.getTip();case 7:return t.t2=t.sent,t.t3={store:t.t1,tip:t.t2},r.tree=new t.t0(t.t3),t.abrupt("return",r);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();window.Store=j;var E=function(e){var t=Object(s.f)().did,n=Object(r.useState)(),c=Object(i.a)(n,2),u=c[0],o=c[1];Object(r.useEffect)((function(){t?j.fromDID(t).then(o):j.fromKey().then(o)}),[t]);var l=a.a.Children.toArray(e.children).map((function(e){return a.a.cloneElement(e,{tupelo:u})}));return void 0===u?a.a.createElement("p",null,"Loading ChainTree, please wait..."):l},g=n(1039),k=n(1035),x=function(e){return a.a.createElement(p.a,Object.assign({tag:"header",direction:"row",align:"center",justify:"between",background:"brand",pad:{left:"medium",right:"small",vertical:"small"},elevation:"medium",style:{zIndex:"1"}},e),a.a.createElement(g.a,null,"Tupelo's Journal"),a.a.createElement(o.b,{to:"/"},a.a.createElement(k.a,{label:"Home"})),a.a.createElement(o.b,{to:"/settings"},a.a.createElement(k.a,{label:"Settings"})))},S=n(1038);var D=function(e){var t=e.tupelo,n=Object(r.useState)("Unknown"),c=Object(i.a)(n,2),u=c[0],o=c[1];return Object(r.useEffect)((function(){t.get("name").then(o)}),[t]),a.a.createElement(S.a,{level:1},u,"'s Journal")},T=n(454),C=n(449),I=n(1031),K=n(1036),P=n(1026),J=n(1037),N=n(1028);var z=function(e){var t=e.onSubmit,n=e.value,c=Object(r.useState)(n||y.get("post","")),u=Object(i.a)(c,2),o=u[0],s=u[1];function l(){return(l=Object(v.a)(m.a.mark((function e(n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(o);case 3:if(!e.sent){e.next=5;break}return e.abrupt("return");case 5:s(""),y.set("post","");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){var e=window.setInterval((function(){y.set("post",o)}),1e3);return function(){return clearInterval(e)}}),[o]),a.a.createElement(p.a,{pad:{bottom:"medium"},margin:{bottom:"medium"}},a.a.createElement(P.a,{onSubmit:function(e){return l.apply(this,arguments)}},a.a.createElement(J.a,{fill:!0,placeholder:"Describe your activity. You can use **Markdown**!",value:o,onChange:function(e){return s(e.target.value)}}),a.a.createElement(k.a,{icon:a.a.createElement(N.a,null),type:"submit",label:"Submit"})))},A=n(452),L=n.n(A),M=n(453),U=n.n(M);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(C.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(e){var t=e.tupelo,n=e.date,c=e.path,u=Object(r.useState)(!1),o=Object(i.a)(u,2),s=o[0],l=o[1],f=Object(r.useState)({}),b=Object(i.a)(f,2),h=b[0],y=b[1],d=(new Date).toISOString().split("T"),O=Object(i.a)(d,1)[0];function w(e,t,n){return j.apply(this,arguments)}function j(){return(j=Object(v.a)(m.a.mark((function e(n,r,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.set(["entries",r,a].join("/"),n);case 2:e.sent,h[a]=n,y(B({},h));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(v.a)(m.a.mark((function e(t){var n,r,a,c,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).toISOString(),r=n.split("T"),a=Object(i.a)(r,2),c=a[0],u=(u=a[1]).slice(0,-1),e.abrupt("return",w(t,c,u));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return(g=Object(v.a)(m.a.mark((function e(t,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,n,r);case 2:return l(""),e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return(x=Object(v.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.set(["entries",n,r].join("/"),"");case 2:e.sent,delete h[r],y(B({},h));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(c,{});case 2:n=e.sent,y(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,c]);var D={},T=Object.keys(h);return T.sort(),T.reverse(),T.forEach((function(e){return""!==h[e]&&(D[e]=h[e])})),a.a.createElement(p.a,null,a.a.createElement(S.a,{level:2},n),O===n&&a.a.createElement(z,{onSubmit:function(e){return E.apply(this,arguments)}}),s&&a.a.createElement(I.a,{onEsc:function(){return l(!1)},onClickOutside:function(){return l(!1)}},a.a.createElement(p.a,{pad:"large"},a.a.createElement(z,{value:h[s],onSubmit:function(e){return function(e,t){return g.apply(this,arguments)}(e,s)}}))),Object.entries(D).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return a.a.createElement(p.a,{fill:!0,border:"left",pad:{left:"small"},margin:"small",key:n},a.a.createElement("div",{dangerouslySetInnerHTML:{__html:U.a.sanitize(L()(r))}}),a.a.createElement(p.a,null,a.a.createElement(K.a,{size:"small",label:"actions",items:[{label:"Edit",onClick:function(){return function(e){return k.apply(this,arguments)}(n)}},{label:"Delete",onClick:function(){return function(e){return x.apply(this,arguments)}(n)}}]})))})))};var F=function(e){var t=e.tupelo,n=Object(r.useState)([]),c=Object(i.a)(n,2),u=c[0],o=c[1];return Object(r.useEffect)((function(){function e(){return(e=Object(v.a)(m.a.mark((function e(){var n,r,a,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).toISOString().split("T"),r=Object(i.a)(n,1),a=r[0],e.t0=Object,e.next=4,t.get("entries",{});case 4:e.t1=e.sent,(c=e.t0.keys.call(e.t0,e.t1)).sort(),c.reverse(),c.includes(a)||(c=[a].concat(Object(T.a)(c))),o(c);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t]),a.a.createElement(p.a,null,u.map((function(e){return a.a.createElement(W,{key:e,tupelo:t,date:e,path:["entries",e].join("/")})})))},H=n(1034),Y=n(1032);var $=function(e){var t=e.tupelo,n=Object(r.useState)(""),c=Object(i.a)(n,2),u=c[0],o=c[1],s=Object(r.useState)(""),l=Object(i.a)(s,2),f=l[0],b=l[1];function h(){return(h=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.set("name",f);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){t.get("name").then(b),t.tree.id().then(o)}),[t]),a.a.createElement(p.a,null,a.a.createElement(p.a,null,a.a.createElement(P.a,{onSubmit:function(){return h.apply(this,arguments)}},a.a.createElement(H.a,{label:"Display Name"},a.a.createElement(Y.a,{value:f,onChange:function(e){return b(e.target.value)}})),a.a.createElement(k.a,{type:"submit",label:"Submit"}))),a.a.createElement(p.a,null,"Your DID is: ",u))},q=(n(1015),{global:{font:{family:"monospace",size:"18px",height:"20px"}}});var G=function(){var e=Object(r.useState)(),t=Object(i.a)(e,2),n=t[0],c=t[1];return window.tupelo=n,Object(r.useEffect)((function(){j.fromKey().then(c)}),[]),void 0===n?a.a.createElement("p",null,"Loading Tupelo WASM SDK, please wait..."):a.a.createElement(l.a,{theme:q,full:!0},a.a.createElement(o.a,null,a.a.createElement(p.a,{align:"center"},a.a.createElement(p.a,{fill:!0},a.a.createElement(x,null)),a.a.createElement(p.a,{width:"large"},a.a.createElement(s.c,null,a.a.createElement(s.a,{exact:!0,path:"/"},a.a.createElement(D,{tupelo:n}),a.a.createElement(F,{tupelo:n})),a.a.createElement(s.a,{exact:!0,path:"/journal/:did"},a.a.createElement(E,null,a.a.createElement(D,null),a.a.createElement(F,null))),a.a.createElement(s.a,{path:"/settings"},a.a.createElement($,{tupelo:n})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(a.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},217:function(e,t){},459:function(e,t,n){e.exports=n(1016)},492:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=492},494:function(e,t){},496:function(e,t){},528:function(e,t){},529:function(e,t){},576:function(e,t){},672:function(e,t){},957:function(e,t){},959:function(e,t){}},[[459,1,2]]]);
//# sourceMappingURL=main.6c9670af.chunk.js.map